<!DOCTYPE html>
<html>
<body>


<!-- ****************** amazon mturk HIT layout ****************** -->
<h2 id="gamename" style="opacity:1;font-size:200%;">Gaze <img src="http://isun.cs.princeton.edu/pvgaze/mturk/instruction_imgs/gaze.png" height="40" align="top"> Game</h2>

<li>	

	<p>This game uses your web camera to track where youâ€™re looking at the screen. See <a id="urlinstr" target="_blank">Detailed Instruction and Hardware Test</a></p>

	<p>It offers a bonus based on your points in the game. To get points, you need to:</br>(1) stare at birds and pigs, and (2) remember photos that you see.</p>
	<img src="http://isun.cs.princeton.edu/pvgaze/mturk/instruction_imgs/fivestep.png" width="650">
	
	</br></br>

	<p><span style="color:red;">For the first hit, it may take some time for you to figure the whole thing out. But once it works, it takes about 4 mins to complete one HIT. Completed HITs are guaranteed to be paid. </br>  However, this game is still under developing, so it may not work for everyone/hardware setting. And we suggest you NOT spend hours trying to get it work. We will not be able to pay you unless you complete the task. Thanks.</span></p>

	</br></br>

	<span style="font-size:larger;font-weight:bold;" id="span_link"><a id="urltoclick" target="_blank">Click here</a> to work on the HIT (in a new tab).</span>

	</br></br>

	<p><span style="font-size:12px;">By playing this game, you are participating in a scientific study for eye-tracking prediction by students from Princeton University. Your participation in this research is voluntary. You may decline further participation, at any time, without adverse consequences. Your anonymity is assured: the images of your eyes seen from the webcam will not be released, and all information will be anonymized.</span></p>

</li>

<h2>On Complete</h2>
<li>
	<p> When you finish, please enter your completion code in the box below: </p>


	<input id="passcode" name="passcode" size="20" type="text" value="" />

	<p>If you have any comments for us, please let us know here (optional):</p>
	<textarea rows="3" cols="80" name="comments" id="comments"></textarea>	

	<p><input type="hidden" id="assignmentId" name="assignmentId" value=""></p>

	<input autocomplete="off" id="submitButton" onclick="return confirmSubmit()" type="submit" value="Submit" /> 


	<p>If you encounter any technical problems, please contact pingmeix.princeton@gmail.com</br>
	Note: data collected by this HIT is for research purposes only. </p>
</li>
</br></br>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> 
<script type="text/javascript">
function confirmSubmit(){
	var code = $('#passcode').val();
	var correct = 'foo'; // later: encodeURL(url)
	if(code == correct){
		alert("Oh, no that code is not correct. If you completed the task but lost the code, enter LOST above. If you have not completed the task you can return the HIT.");
		return false;
	}else{
		return true;
	}
}

function getURLParameter(VarSearch, defaultval){
    var SearchString = window.location.search.substring(1);
    var VariableArray = SearchString.split('&');
    for(var i = 0; i < VariableArray.length; i++){
        var KeyValuePair = VariableArray[i].split('=');
        if(KeyValuePair[0] == VarSearch){
            return KeyValuePair[1];
        }
    }
	return defaultval;
}
var displayElm2Center = function(id, w, h){
    var l = (w - $(id).width())/2;
    var t = (h - $(id).height())/2;
    $(id).css({left: l, top: t});
    $(id).show();
}

$(document).ready(function(){
	$('body').css({
		"font-size": "16px",
		"font-family": "'Lucida Grande', Helvetica, Arial, Verdana, sans-serif",
		"text-align": "center",
		"background-color": "#F1F1F1"
	});
	$('li').css({
		"list-style-type": "none",
	    "display": "inline-block",
	    "padding": "20px 0px 20px",
	    "min-height": "122px",
	    "width": "800px",
	    "border": "1px solid #dadada",
	    "-webkit-border-radius": "5px",
	    "-moz-border-radius": "5px",
	    "border-radius": "5px",
	    "background-color": "#FFFFFF"
	});
	$('p').css({
		"position":"relative",
		"width":"700px",
		"text-align": "left",
		"left":"50px"
	});
	$('.showlink').hide();

	// var hitID = getURLParameter('hitId');
	// var requesterID = getURLParameter('requesterId');
	var workerId = getURLParameter('workerId', null);
	var assignmentId = getURLParameter('assignmentId', null);
	// var experimentId = ${experimentId};

	// instruction webpage
	var instructionURL = 'http://isun.cs.princeton.edu/pvgaze/mturk/gameinstruction.html';

	$('#urlinstr').attr('href', instructionURL);

	document.getElementById('assignmentId').value = assignmentId;
	// Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
	if (assignmentId == "ASSIGNMENT_ID_NOT_AVAILABLE" || assignmentId == null){
		// do nothing
	}else{ // If HIT accepted
		var experimentURL = 'http://isun.cs.princeton.edu/pvgaze/pvgazetrackr.html';
		experimentURL += '?procedure=D&workerId=' + workerId + '&assignmentId=' + assignmentId + '&experimentId=' + experimentId;
		$('#urltoclick').attr('href', experimentURL);
		$('#urladdress').html(experimentURL);
	}
});
</script>



<!-- ****************** amazon mturk HIT layout ****************** -->

</body>
</html>